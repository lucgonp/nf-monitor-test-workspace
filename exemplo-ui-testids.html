<!-- EXEMPLO: Como adicionar data-testids na sua UI para testes de bandeja e NFE -->

<!-- 1. ÃCONE NFE na lista/grid -->
<div data-testid="icone-nfe" class="nfe-item" onclick="selecionarNFE()">
  <img src="nfe-icon.png" alt="NFE" />
  <span>nota_fiscal_123.xml</span>
</div>

<!-- 2. MENU DE CONTEXTO para NFE (clique direito) -->
<div data-testid="menu-contexto-nfe" class="context-menu" style="display: none;">
  <button data-testid="opcao-visualizar" onclick="visualizarNFE()">
    ğŸ“„ Visualizar NFE
  </button>
  <button data-testid="opcao-reenviar" onclick="reenviarNFE()">
    ğŸ”„ Reenviar
  </button>
  <button data-testid="opcao-excluir" onclick="excluirNFE()">
    ğŸ—‘ï¸ Excluir
  </button>
</div>

<!-- 3. HISTÃ“RICO DE EXECUÃ‡Ã•ES -->
<div data-testid="historico-execucoes" class="historico">
  <h3>HistÃ³rico de ExecuÃ§Ãµes</h3>
  <div data-testid="item-historico" class="historico-item">
    <span>nota_123.xml</span>
    <span class="timestamp">16/10/2025 14:30:15</span>
    <span class="status success">âœ… Enviado</span>
  </div>
</div>

<!-- 4. BOTÃƒO LIMPAR HISTÃ“RICO -->
<button data-testid="btn-limpar-historico" onclick="limparHistorico()">
  ğŸ—‘ï¸ Limpar HistÃ³rico
</button>

<!-- 5. INDICADOR DE STATUS DA BANDEJA -->
<div data-testid="status-bandeja" class="tray-status">
  <span data-testid="icone-bandeja">ğŸ“</span>
  <span data-testid="status-texto">Monitor Ativo</span>
</div>

<!-- 6. NOTIFICAÃ‡Ã•ES -->
<div data-testid="notificacao" class="notification" style="display: none;">
  <span data-testid="notificacao-titulo">NFE Processada</span>
  <span data-testid="notificacao-conteudo">nota_123.xml enviada com sucesso</span>
</div>

<!-- 7. CONFIGURAÃ‡Ã•ES -->
<div data-testid="configuracoes" class="settings">
  <h3>ConfiguraÃ§Ãµes</h3>
  <label>
    <input type="checkbox" data-testid="auto-start" /> Iniciar com Windows
  </label>
  <label>
    <input type="checkbox" data-testid="minimize-to-tray" /> Minimizar para bandeja
  </label>
</div>

<script>
// JAVASCRIPT: FunÃ§Ãµes para testar interaÃ§Ãµes

function selecionarNFE() {
  // Seleciona NFE e mostra detalhes
  console.log('NFE selecionada');
}

function mostrarMenuContexto(event) {
  event.preventDefault();
  const menu = document.querySelector('[data-testid="menu-contexto-nfe"]');
  menu.style.display = 'block';
  menu.style.left = event.pageX + 'px';
  menu.style.top = event.pageY + 'px';
}

function visualizarNFE() {
  console.log('Visualizando NFE');
  // Implementar visualizaÃ§Ã£o
}

function reenviarNFE() {
  console.log('Reenviando NFE');
  // Implementar reenvio
}

function limparHistorico() {
  if (confirm('Confirma limpar histÃ³rico?')) {
    const historico = document.querySelector('[data-testid="historico-execucoes"]');
    historico.innerHTML = '<h3>HistÃ³rico de ExecuÃ§Ãµes</h3><p>Nenhum item no histÃ³rico</p>';
  }
}

// EVENTOS IPC para comunicaÃ§Ã£o com main process
const { ipcRenderer } = require('electron');

// Escuta eventos da bandeja
ipcRenderer.on('tray-click', () => {
  console.log('Clique na bandeja detectado');
  // Atualizar UI conforme necessÃ¡rio
});

ipcRenderer.on('tray-right-click', () => {
  console.log('Clique direito na bandeja detectado');
  // Mostrar menu ou aÃ§Ã£o especÃ­fica
});

ipcRenderer.on('nfe-processada', (event, dados) => {
  console.log('NFE processada:', dados);
  mostrarNotificacao(`${dados.arquivo} processada com sucesso`);
});

function mostrarNotificacao(mensagem) {
  const notif = document.querySelector('[data-testid="notificacao"]');
  const conteudo = document.querySelector('[data-testid="notificacao-conteudo"]');
  conteudo.textContent = mensagem;
  notif.style.display = 'block';
  
  setTimeout(() => {
    notif.style.display = 'none';
  }, 3000);
}

// Adicionar event listeners
document.addEventListener('DOMContentLoaded', () => {
  // Clique direito no Ã­cone NFE
  const iconesNFE = document.querySelectorAll('[data-testid="icone-nfe"]');
  iconesNFE.forEach(icone => {
    icone.addEventListener('contextmenu', mostrarMenuContexto);
  });
  
  // Fechar menu ao clicar fora
  document.addEventListener('click', () => {
    const menu = document.querySelector('[data-testid="menu-contexto-nfe"]');
    menu.style.display = 'none';
  });
});
</script>

<!-- 
COMO USAR NOS TESTES PLAYWRIGHT:

// Clique no Ã­cone NFE
await page.locator('[data-testid="icone-nfe"]').click();

// Clique direito para menu contexto
await page.locator('[data-testid="icone-nfe"]').click({ button: 'right' });

// Verificar se menu apareceu
await expect(page.locator('[data-testid="menu-contexto-nfe"]')).toBeVisible();

// Clicar em opÃ§Ã£o do menu
await page.locator('[data-testid="opcao-visualizar"]').click();

// Verificar histÃ³rico
await expect(page.locator('[data-testid="historico-execucoes"]')).toContainText('nota_123.xml');

// Limpar histÃ³rico
await page.locator('[data-testid="btn-limpar-historico"]').click();
await page.getByText('Confirmar').click();
-->